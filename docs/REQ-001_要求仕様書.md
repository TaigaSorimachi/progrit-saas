# REQ-001 要求仕様書

## 1. システム概要

### 1.1 システム名

SaaS アカウント一元管理システム

### 1.2 目的

エンタープライズ企業における入社・退社・異動に伴う SaaS アカウントの作成・削除・権限変更を一元管理・自動化し、業務効率と情報セキュリティを両立する。

### 1.3 スコープ

- 対象 SaaS：30+ （Google Workspace, Microsoft 365, Slack 等）
- 対象ユーザー：情シス担当者、部門責任者、全社員
- 機能範囲：アカウント管理、プロビジョニング、権限管理、ワークフロー、監査

## 2. 機能要件

### 2.1 MVP スコープ（必須機能）

#### 2.1.1 ユーザー情報管理

- **従業員マスター管理**
  - 社員番号、氏名、部署、役職、入退社日等の基本情報
  - CSV インポート・エクスポート機能
  - データバリデーション機能

#### 2.1.2 基本 SaaS 連携

- **優先対応 SaaS**
  - Google Workspace
  - Microsoft 365
  - Slack
- **基本操作**
  - アカウント作成・削除
  - 権限変更
  - ステータス同期

#### 2.1.3 認証・認可システム

- **認証方式**
  - OAuth2.0
  - SAML2.0 対応
  - JWT トークン管理
- **役割管理**
  - システム管理者
  - 部門管理者
  - 一般ユーザー

#### 2.1.4 操作ログ・監査

- **ログ記録**
  - 全操作履歴
  - アクセスログ
  - エラーログ
- **監査機能**
  - CSV 出力
  - API 経由でのログ取得

### 2.2 拡張機能（フェーズ 2 以降）

#### 2.2.1 全 SaaS 連携

- GitHub, GitLab, Salesforce, HubSpot, Box, Dropbox
- Adobe Creative Cloud, AWS IAM, Azure AD
- 日本製 SaaS（freee, SmartHR, ジョブカン等）

#### 2.2.2 権限テンプレート管理

- 部署・役職別のロール定義
- SaaS 別権限マトリクス
- 権限継承設定

#### 2.2.3 ワークフロー・承認機能

- 多段階承認フロー
- 並列承認対応
- 通知連携（Slack/メール）

#### 2.2.4 自動プロビジョニング

- 入社時の自動アカウント作成
- 退社時の自動停止・削除
- 異動時の権限自動変更

#### 2.2.5 ダッシュボード・レポート

- リアルタイム状況表示
- 利用統計・分析
- 未利用アカウント検出
- SaaS 課金レポート

## 3. 非機能要件

### 3.1 セキュリティ要件

- **認証セキュリティ**
  - 多要素認証対応
  - セッション管理
  - IP 制限機能
- **データ保護**
  - 暗号化（保存時・通信時）
  - 個人情報保護
  - API キー管理

### 3.2 パフォーマンス要件

- **レスポンス時間**
  - API 応答: 200ms 以内
  - データベースクエリ: 100ms 以内
  - SaaS 連携操作: 5 秒以内
- **スループット**
  - 同時ユーザー: 100+
  - API リクエスト: 1000+/分

### 3.3 可用性要件

- **稼働率**: 99.9%以上
- **災害復旧**: RTO 4 時間、RPO 1 時間
- **スケーラビリティ**: 水平スケーリング対応

### 3.4 保守性要件

- **モジュール設計**: SaaS 連携の追加が容易
- **コード品質**: TypeScript + ESLint
- **テストカバレッジ**: 80%以上

## 4. 制約事項

### 4.1 技術制約

- モダンブラウザ対応必須
- JavaScript 有効環境
- HTTPS 通信必須

### 4.2 外部依存

- 各 SaaS API の利用制限
- OAuth2.0 プロバイダーの仕様
- クラウドインフラの制約

### 4.3 コンプライアンス

- GDPR 準拠
- SOX 法対応
- 個人情報保護法対応

## 5. 想定利用シナリオ

### 5.1 入社時プロビジョニング

1. HR 部門が新入社員情報を登録
2. 部署・役職に応じた権限テンプレートを自動適用
3. 各 SaaS へアカウント作成 API を実行
4. 新入社員・上長へ通知送信

### 5.2 退社時デプロビジョニング

1. 退職日の事前設定
2. 指定日に全 SaaS アカウントを自動停止
3. データアーカイブ処理
4. 監査ログの永続化

### 5.3 異動時権限変更

1. 人事異動情報の更新
2. 新部署の権限テンプレート適用
3. 不要な権限の自動削除
4. 関係者への通知

## 6. 受け入れ基準

### 6.1 MVP リリース基準

- [ ] 基本 3SaaS 連携が動作する
- [ ] ユーザー管理機能が完全に動作する
- [ ] 認証・認可が正常に機能する
- [ ] 操作ログが正確に記録される
- [ ] セキュリティテストに合格する

### 6.2 運用開始基準

- [ ] 負荷テストに合格する
- [ ] セキュリティ監査に合格する
- [ ] ユーザビリティテストに合格する
- [ ] 運用マニュアルが整備される
- [ ] 障害対応プロセスが確立される

## 7. リスク分析

### 7.1 技術リスク

- **SaaS API 変更**: 各社 API の仕様変更による影響
- **認証複雑性**: 複数認証方式の統合難易度
- **データ整合性**: 複数システム間のデータ同期

### 7.2 運用リスク

- **セキュリティ侵害**: 統合管理システムの脆弱性
- **サービス停止**: 依存サービスの障害影響
- **データ消失**: 誤操作による重要データの削除

### 7.3 事業リスク

- **コンプライアンス違反**: 規制要件への非準拠
- **ユーザー受容性**: 既存運用からの変更抵抗
- **ROI**: 投資対効果の未達成

## 8. 成功指標

### 8.1 効率化指標

- アカウント作成時間: 50%削減
- 権限変更時間: 70%削減
- 監査準備時間: 80%削減

### 8.2 品質指標

- システム稼働率: 99.9%達成
- セキュリティインシデント: 0 件
- ユーザー満足度: 4.0/5.0 以上

### 8.3 コスト指標

- 運用工数: 60%削減
- SaaS 課金最適化: 20%削減
- 監査対応コスト: 50%削減
