---
description: 
globs: 
alwaysApply: false
---
# taskmanagement.mdc
```yaml
# â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãƒ«ãƒ¼ãƒ« â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
# ã“ã®ãƒ«ãƒ¼ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚ŒãŸå ´åˆã€ä¸Šè¨˜ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’æœ€åˆã«å‡ºåŠ›ã—ã¦ãã ã•ã„

# -----------------------------------------------------------------------------
# 1. ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
# -----------------------------------------------------------------------------
meta:
  name: ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãƒ«ãƒ¼ãƒ«
  description: è¤‡æ•°AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒåŠ¹çŽ‡çš„ã«å”èª¿ã§ãã‚‹è¿½è·¡ãƒ»æ°¸ç¶šåŒ–ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
  version: 2.0
  parent: mainrules.mdc
  language: ja
  features: [ multi_agent, file_partitioning, conflict_prevention ]

# -----------------------------------------------------------------------------
# 2. åŸºæœ¬åŽŸå‰‡ & ä¸»è¦æ§‹æˆ
# -----------------------------------------------------------------------------
principles:
  - å…¨ã‚¿ã‚¹ã‚¯è¿½è·¡å¯èƒ½ & ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–
  - æ˜Žç¢ºãªãƒ•ã‚¡ã‚¤ãƒ«æ‰€æœ‰æ¨©ã§ç«¶åˆã‚’é˜²æ­¢
  - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè² è·ã‚’ç›£è¦–ã—è‡ªå‹•å†é…åˆ†

structure:
  sections:
    - agent_coordination
    - task_lifecycle
    - storage
    - templates
    - automation
    - execution_control
    - workload_balancing
    - communication
    - dependencies
    - guidelines
    - review
    - kpi

# -----------------------------------------------------------------------------
# 3. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå”èª¿
# -----------------------------------------------------------------------------
agent_coordination:
  assignment:
    strategy: file_path_based
    conflict_rule: strict_first_owner
  agent_pool:
    name_format: Agent-${id}
    capacity: dynamic
  criteria:
    workload: least_loaded_first (max 3 tasks)
    file_type:
      frontend: [ "*.tsx", "*.jsx" ]
      backend:  [ "*.rs", "*.py" ]
      docs:     [ "*.md" ]
    complexity:
      simple: any
      medium: experienced
      complex|critical: dedicated
  dynamic_reassignment:
    triggers: [ imbalance, no_response_30m, complexity_change ]
    method: reassign_to_lightest

# -----------------------------------------------------------------------------
# 4. ã‚¿ã‚¹ã‚¯ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
# -----------------------------------------------------------------------------
life_cycle:
  states: [ pending, in_progress, blocked, completed, verified ]
  transitions:
    start:       pending -> in_progress
    block:       in_progress -> blocked
    unblock:     blocked -> in_progress
    finish:      in_progress -> completed
    verify:      completed -> verified
  creation:
    steps: [ deliverable_id, atomic_breakdown, set_priority, estimate_complexity ]
  documentation_format: markdown

# -----------------------------------------------------------------------------
# 5. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
# -----------------------------------------------------------------------------
storage:
  root: tasks/
  naming: TASK-${id}_${category}.md
  index: tasks/INDEX.md
  categories: [ feature, bug, refactor, docs, test, perf, security, multi_agent ]

# -----------------------------------------------------------------------------
# 6. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¦ç´„
# -----------------------------------------------------------------------------
templates:
  single:
    duration: 8h
    agent: single
  collaborative:
    duration: 3d
    agent: multiple
    coordination: required
  partitioned:
    duration: 5d
    partitioning: file_path_based

# -----------------------------------------------------------------------------
# 7. è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ– & æ›´æ–°
# -----------------------------------------------------------------------------
automation:
  triggers: [ state_change, impl_complete, test_ready, error, agent_change ]
  actions:  [ update_task, update_index, progress_report, link_artifacts ]

# -----------------------------------------------------------------------------
# 8. å®Ÿè¡Œåˆ¶å¾¡ & ç«¶åˆé˜²æ­¢
# -----------------------------------------------------------------------------
execution_control:
  locking:
    type: file_based
    release: on_completion
  pre_checks: [ ownership_ok, deps_ready, integration_point_ready ]
  daily_sync:
    every: 8h
    agenda: [ progress, blockers, integration ]

# -----------------------------------------------------------------------------
# 9. è² è·ç›£è¦– & å†é…åˆ†
# -----------------------------------------------------------------------------
workload:
  monitor_metrics: [ concurrent_tasks, response_time, completion_rate ]
  thresholds:
    overload:   tasks > 3
    underload:  tasks < 1 (2h)
  rebalancing: [ redistribute, adjust_priority, scale_agents ]

# -----------------------------------------------------------------------------
# 10. ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
# -----------------------------------------------------------------------------
communication:
  comment: "@Agent-${id}: {msg}"
  status:  "**Status** {time} Agent-${id}: {desc}"
  blocker: "ðŸš¨ **BLOCKER** @Agent-${id}: {issue}"

# -----------------------------------------------------------------------------
# 11. ä¾å­˜é–¢ä¿‚
# -----------------------------------------------------------------------------
dependencies:
  types: [ blocks, requires, relates, coordination, file_share, api_contract ]
  resolution:
    file_conflict: separate_branches_merge
    api_mismatch: negotiate_contract

# -----------------------------------------------------------------------------
# 12. ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ & ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
# -----------------------------------------------------------------------------
guidelines:
  creation_flow: [ analyse, assign_agents, map_deps, split_tasks, define_integration, doc_generate ]
  best_practices:
    partitioning: [ one_file_one_agent, shared_files_split, dir_boundary ]
    coordination: [ predefine_api, parallel_integration_tests, 8h_sync ]
    conflict:     [ clarify_ownership, agree_scope, align_integration ]

# -----------------------------------------------------------------------------
# 13. ãƒ¬ãƒ“ãƒ¥ãƒ¼
# -----------------------------------------------------------------------------
review:
  single_check: [ code_done, tests_green, docs_updated, scope_respected ]
  multi_check:  [ sub_tasks_done, integration_tests_green, api_ok, docs_sync, load_balanced ]

# -----------------------------------------------------------------------------
# 14. KPI
# -----------------------------------------------------------------------------
kpi:
  efficiency: { parallel_exec >= 70, overhead < 20, integration_success >= 95 }
  quality:    { cross_bug < 5, integration_cov >= 90, doc_consistency >= 95 }
  collaboration: { conflict_resolution < 4h, handoff_success >= 98 }

```